---
import { getCollection } from "astro:content";
import Layout from "../layouts/Layout.astro";
import { getTags } from "../utils/getTags";
import { upperFirst } from "../utils/upperFirst";

const recipes = await getCollection("recipes").then((r) =>
  r.sort((a, b) => b.data.date.getTime() - a.data.date.getTime())
);

const tags = getTags(recipes);
---

<Layout>
  <header>
    <h1>Marcus' recipes 🍳</h1>
    <p>
      The recipes I've collected and regularly returned to. Some are lifted and
      modified, others are my own. What do you feel like cooking?
    </p>
  </header>
  <main>
    <h2>Latest recipes</h2>
    <ul>
      {
        recipes.map((recipe) => (
          <li>
            <a href={`/${recipe.slug}`}>{recipe.data.title}</a>
          </li>
        ))
      }
    </ul>
    <h2>Tags</h2>
    <ul class="list-none p-0">
      {
        tags.map((tag) => (
          <li class="mr-2 inline list-none pl-0">
            <a href={`/tags/${tag}`}>{upperFirst(tag)}</a>
          </li>
        ))
      }
    </ul>
  </main>
</Layout>
